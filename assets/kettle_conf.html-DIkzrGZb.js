import{_ as d,c as e,e as r,o as a}from"./app-CzK_TT9_.js";const o={};function h(s,t){return a(),e("div",null,[...t[0]||(t[0]=[r('<h1 id="kettle-工程实践常见配置信息总结" tabindex="-1"><a class="header-anchor" href="#kettle-工程实践常见配置信息总结"><span>Kettle 工程实践常见配置信息总结</span></a></h1><h2 id="一、配置文件目录结构" tabindex="-1"><a class="header-anchor" href="#一、配置文件目录结构"><span>一、配置文件目录结构</span></a></h2><p>Kettle（Pentaho Data Integration）的配置文件主要分布在以下路径中：</p><table><thead><tr><th>配置文件类型</th><th>路径说明</th><th>典型路径（Linux/Windows）</th></tr></thead><tbody><tr><td>全局配置</td><td>存储全局环境变量、编码格式、文件路径等基础配置</td><td><code>~/.kettle/kettle.properties</code>（用户级优先）<br><code>/etc/kettle/kettle.properties</code>（系统级）</td></tr><tr><td>资源库配置</td><td>定义数据仓库（Repository）的存储位置、类型及连接信息</td><td><code>~/.kettle/repositories.xml</code>（存储资源库元数据）</td></tr><tr><td>JDBC驱动配置</td><td>管理数据库连接池参数（如批量提交、压缩传输等）</td><td><code>~/.kettle/jdbc.properties</code>（JNDI连接配置）</td></tr><tr><td>日志配置</td><td>控制日志输出级别、格式及存储路径</td><td><code>data-integration/log4j.xml</code>（全局日志）<br><code>spoon.log</code>（Spoon界面日志）</td></tr><tr><td>启动参数配置</td><td>设置JVM内存、编码格式等运行时参数</td><td><code>spoon.bat</code>（Windows）<br><code>spoon.sh</code>（Linux）中的 <code>PENTAHO_DI_JAVA_OPTIONS</code></td></tr><tr><td>插件配置</td><td>扩展插件路径及依赖库</td><td><code>data-integration/plugins/</code>（默认插件目录）</td></tr></tbody></table><hr><h2 id="二、常见配置项分类说明" tabindex="-1"><a class="header-anchor" href="#二、常见配置项分类说明"><span>二、常见配置项分类说明</span></a></h2><h3 id="_1-全局配置" tabindex="-1"><a class="header-anchor" href="#_1-全局配置"><span>1. 全局配置</span></a></h3><table><thead><tr><th>配置项</th><th>配置文件路径</th><th>示例值</th><th>配置说明</th></tr></thead><tbody><tr><td>file.encoding</td><td>kettle.properties</td><td>UTF-8</td><td>设置全局编码格式，避免中文乱码</td></tr><tr><td>kettle.home</td><td>kettle.properties</td><td>/opt/kettle</td><td>定义Kettle工作根目录，影响资源库和插件加载路径</td></tr><tr><td>system.timezone</td><td>kettle.properties</td><td>Asia/Shanghai</td><td>设置系统时区，确保时间字段处理一致性</td></tr></tbody></table><h3 id="_2-数据库连接" tabindex="-1"><a class="header-anchor" href="#_2-数据库连接"><span>2. 数据库连接</span></a></h3><table><thead><tr><th>配置项</th><th>配置文件路径</th><th>示例值</th><th>配置说明</th></tr></thead><tbody><tr><td>rewriteBatchedStatements</td><td>jdbc.properties</td><td>true</td><td>启用批量插入优化，提升数据写入效率</td></tr><tr><td>useServerPrepStmts</td><td>jdbc.properties</td><td>false</td><td>禁用预编译语句缓存，减少内存占用（根据数据库类型调整）</td></tr><tr><td>autoCommit</td><td>数据库连接配置界面</td><td>false</td><td>关闭自动提交，由作业/转换手动控制事务</td></tr></tbody></table><h3 id="_3-日志配置" tabindex="-1"><a class="header-anchor" href="#_3-日志配置"><span>3. 日志配置</span></a></h3><table><thead><tr><th>配置项</th><th>配置文件路径</th><th>示例值</th><th>配置说明</th></tr></thead><tbody><tr><td>log4j.logger.org.pentaho</td><td>log4j.xml</td><td>INFO</td><td>设置Pentaho组件日志级别（DEBUG/INFO/WARN/ERROR）</td></tr><tr><td>log.file.path</td><td>log4j.xml</td><td>/var/log/kettle/</td><td>定义日志文件存储路径及滚动策略（按日期/大小分割）</td></tr></tbody></table><h3 id="_4-性能优化" tabindex="-1"><a class="header-anchor" href="#_4-性能优化"><span>4. 性能优化</span></a></h3><table><thead><tr><th>配置项</th><th>配置文件路径</th><th>示例值</th><th>配置说明</th></tr></thead><tbody><tr><td>-Xmx</td><td>spoon.bat/spoon.sh</td><td>-Xmx4096m</td><td>设置JVM最大堆内存（需小于物理内存的1/4）</td></tr><tr><td>-XX:MaxPermSize</td><td>spoon.bat/spoon.sh</td><td>-XX:MaxPermSize=512m</td><td>调整永久代内存（Java 8+可忽略，改用元空间）</td></tr><tr><td>enable.bulk.load</td><td>转换步骤属性（如“表输出”）</td><td>true</td><td>启用数据库批量加载模式，提升写入性能</td></tr></tbody></table><h3 id="_5-资源库配置" tabindex="-1"><a class="header-anchor" href="#_5-资源库配置"><span>5. 资源库配置</span></a></h3><table><thead><tr><th>配置项</th><th>配置文件路径</th><th>示例值</th><th>配置说明</th></tr></thead><tbody><tr><td>base_directory</td><td>repositories.xml</td><td>/data/kettle_repos</td><td>定义资源库的物理存储路径</td></tr><tr><td>repository_type</td><td>repositories.xml</td><td>FileRepository</td><td>资源库类型（如文件型、数据库型）</td></tr></tbody></table><h3 id="_6-安全配置" tabindex="-1"><a class="header-anchor" href="#_6-安全配置"><span>6. 安全配置</span></a></h3><table><thead><tr><th>配置项</th><th>配置文件路径</th><th>示例值</th><th>配置说明</th></tr></thead><tbody><tr><td>repositories.pwd</td><td>.kettle/目录</td><td>加密字符串</td><td>存储资源库密码的加密文件（自动生成，勿手动修改）</td></tr><tr><td>ssl.truststore.path</td><td>kettle.properties</td><td>/etc/ssl/kettle.jks</td><td>配置HTTPS连接时信任的证书库路径</td></tr></tbody></table><hr><h2 id="三、配置信息汇总表" tabindex="-1"><a class="header-anchor" href="#三、配置信息汇总表"><span>三、配置信息汇总表</span></a></h2><table><thead><tr><th>配置文件路径</th><th>配置项</th><th>示例值</th><th>配置说明</th></tr></thead><tbody><tr><td>~/.kettle/kettle.properties</td><td>file.encoding</td><td>UTF-8</td><td>全局编码格式，避免乱码</td></tr><tr><td>~/.kettle/jdbc.properties</td><td>rewriteBatchedStatements</td><td>true</td><td>启用数据库批量插入优化</td></tr><tr><td>data-integration/log4j.xml</td><td>log4j.logger.org.pentaho</td><td>INFO</td><td>控制Pentaho组件日志级别</td></tr><tr><td>spoon.bat/spoon.sh</td><td>-Xmx</td><td>-Xmx4096m</td><td>设置JVM最大堆内存为4GB</td></tr><tr><td>~/.kettle/repositories.xml</td><td>base_directory</td><td>/data/kettle_repos</td><td>资源库存储路径</td></tr><tr><td>~/.kettle/repositories.pwd</td><td>加密密码字段</td><td>AES:encrypted_string</td><td>存储资源库密码的加密字符串</td></tr></tbody></table><hr><h2 id="四、关键配置建议" tabindex="-1"><a class="header-anchor" href="#四、关键配置建议"><span>四、关键配置建议</span></a></h2><ul><li><strong>内存分配</strong>：根据服务器内存调整 <code>-Xmx</code>（建议不超过物理内存的50%），避免内存溢出。</li><li><strong>日志管理</strong>：定期清理 <code>spoon.log</code> 和作业日志，防止磁盘占满。</li><li><strong>资源库备份</strong>：定期备份 <code>repositories.xml</code> 和 <code>repositories.pwd</code>，防止配置丢失。</li><li><strong>编码统一</strong>：确保所有文件（如输入/输出文件）与 <code>file.encoding</code> 一致，避免乱码问题。</li></ul><p>通过合理配置上述参数，可显著提升 Kettle 作业的稳定性、性能和可</p>',25)])])}const l=d(o,[["render",h]]),i=JSON.parse('{"path":"/etl/kettle_conf.html","title":"Kettle 工程实践常见配置信息总结","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1749401044000,"contributors":[{"name":"Hankin","username":"Hankin","email":"hankin@catmes.com","commits":1,"url":"https://github.com/Hankin"}],"changelog":[{"hash":"dd122c34b3ed4c7c0eea5a931c6af4e579de3bc7","time":1749401044000,"email":"hankin@catmes.com","author":"Hankin","message":"UPDATE kettle"}]},"filePathRelative":"etl/kettle_conf.md"}');export{l as comp,i as data};
