import{_ as a,c as s,e,o as t}from"./app-D3rUnszu.js";const l={};function i(c,n){return t(),s("div",null,[...n[0]||(n[0]=[e(`<h2 id="location表达式" tabindex="-1"><a class="header-anchor" href="#location表达式"><span>location表达式</span></a></h2><h3 id="示例" tabindex="-1"><a class="header-anchor" href="#示例"><span>示例</span></a></h3><ol><li>使用正则表达式，同时匹配多个前缀</li></ol><ul><li>该配置会匹配以 /admin-api/、/user-api/ 或 /payment-api/ 开头的请求（如 /admin-api/users、/payment-api/checkout）</li><li>高频核心路径（如 /admin-api）建议独立配置 location ^~ /admin-api，以提升性能</li></ul><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line"># 正则匹配。使用 ~ 或 ~* 修饰符定义正则表达式，通过 | 符号分隔多个前缀.</span>
<span class="line"># 优先级低于优先前缀匹配：^~</span>
<span class="line">location ~ ^/(admin-api|user-api|payment-api)/ {</span>
<span class="line">    proxy_pass http://backend_server;</span>
<span class="line">    proxy_set_header Host $host;</span>
<span class="line">}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="匹配规则和顺序" tabindex="-1"><a class="header-anchor" href="#匹配规则和顺序"><span>匹配规则和顺序</span></a></h3><ol><li>精确匹配：<code>location = /abc/ {}</code>，<code>location = /docs/index.html {}</code></li><li>优先前缀匹配：<code>location ^~ /docs/ {}</code></li><li>正则匹配（<code>~</code>或<code>~*</code>）：例：<code>location ~ doc\\.html$ {}</code>, <code>location ~ \\.html$ {}</code>, <code>location ~ ^/(admin-api|user-api|payment-api)/ {}</code>。反斜杠<code>\\</code>指出小数点不能转义，<code>$</code> 符号表示匹配字符串的结尾。</li><li>普通前缀匹配（默认规则）：匹配大小写敏感的前缀。<code>location /index/ {}</code>，<code>location /api {}</code></li><li>通用匹配：<code>location / {}</code></li></ol><ul><li>优先级顺序：<code>精确匹配</code> &gt; <code>优先前缀匹配</code> &gt; <code>正则匹配</code> &gt; <code>普通前缀匹配</code> &gt; <code>通用匹配</code></li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 精确匹配：=</span></span>
<span class="line">location <span class="token operator">=</span> /abc/ <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">#http://abc.com/abc [匹配成功]</span></span>
<span class="line"><span class="token comment">#http://abc.com/abc/index [匹配失败]</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 优先前缀匹配，忽略后缀：^~</span></span>
<span class="line">location ^~ /abc.html <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">#http://abc.com/abc.html [匹配成功]</span></span>
<span class="line"><span class="token comment">#http://abc.com/abc.html/cba.html [匹配成功]</span></span>
<span class="line"><span class="token comment">#http://abc.com/abc.htm [匹配失败]</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 正则匹配，区分大小写：~</span></span>
<span class="line">location ~ /Abc/ <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">#http://abc.com/Abc/ [匹配成功]</span></span>
<span class="line"><span class="token comment">#http://abc.com/abc/ [匹配失败]</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 正则匹配，不区分大小写：~*</span></span>
<span class="line">location ~* /Abc/ <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">#http://abc.com/Abc/ [匹配成功]</span></span>
<span class="line"><span class="token comment">#http://abc.com/abc/ [匹配成功]</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 不加任何规则，默认为大小写敏感的前缀匹配</span></span>
<span class="line">location /index/ <span class="token punctuation">{</span><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">#http://abc.com/index  [匹配成功]</span></span>
<span class="line"><span class="token comment">#http://abc.com/index/index.page  [匹配成功]</span></span>
<span class="line"><span class="token comment">#http://abc.com/test/index  [匹配失败]</span></span>
<span class="line"><span class="token comment">#http://abc.com/Index  [匹配失败]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h3><table><thead><tr><th style="text-align:left;">匹配类型</th><th style="text-align:left;">语法示例</th><th style="text-align:left;">优先级</th><th style="text-align:left;">特点与适用场景</th></tr></thead><tbody><tr><td style="text-align:left;">精确匹配</td><td style="text-align:left;">location = /path</td><td style="text-align:left;">最高</td><td style="text-align:left;">仅匹配完全相同的 URI（如 /doc.html），匹配后立即终止搜索</td></tr><tr><td style="text-align:left;">优先前缀匹配</td><td style="text-align:left;">location ^~ /prefix</td><td style="text-align:left;">次高</td><td style="text-align:left;">匹配以指定字符串开头的 URI（如 /admin-api），匹配后跳过正则检查</td></tr><tr><td style="text-align:left;">正则匹配</td><td style="text-align:left;">location ~ .html$</td><td style="text-align:left;">中</td><td style="text-align:left;">区分大小写的正则匹配（~* 不区分大小写），按配置文件中的顺序匹配，首个匹配生效即停止</td></tr><tr><td style="text-align:left;">普通前缀匹配</td><td style="text-align:left;">location /prefix</td><td style="text-align:left;">低</td><td style="text-align:left;">无修饰符的前缀匹配（如 location /static），在正则匹配后执行，按最长前缀原则匹配</td></tr><tr><td style="text-align:left;">通用匹配</td><td style="text-align:left;">location /</td><td style="text-align:left;">最低</td><td style="text-align:left;">匹配所有未匹配的请求，相当于默认路由</td></tr></tbody></table>`,11)])])}const o=a(l,[["render",i]]),p=JSON.parse('{"path":"/nginx/location.html","title":"","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1751082170000,"contributors":[{"name":"Hankin","username":"Hankin","email":"whq78164@gmail.com","commits":2,"url":"https://github.com/Hankin"}],"changelog":[{"hash":"c43135bb83678d73471215b9609150946934cd64","time":1751082170000,"email":"whq78164@gmail.com","author":"Hankin","message":"ADD nginxui.md"},{"hash":"8ccc8aa4bf9f6916bc5eddede3b30e66939637ac","time":1751017246000,"email":"whq78164@gmail.com","author":"Hankin","message":"UPDATE nginx md file. cicd.sh"}]},"filePathRelative":"nginx/location.md"}');export{o as comp,p as data};
