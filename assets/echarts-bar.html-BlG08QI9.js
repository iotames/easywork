import{_ as s,c as a,e as p,o as t}from"./app-C_8_iCo-.js";const e={};function o(l,n){return t(),a("div",null,[...n[0]||(n[0]=[p(`<h2 id="q-a" tabindex="-1"><a class="header-anchor" href="#q-a"><span>Q&amp;A</span></a></h2><p>我的SmartBI V10版本做交互式仪表盘做柱状图，前端ECharts组件版本是5.1.2。这个很重要，一定记住。 X轴是月份和季度。Y轴是出货金额，单位元。 季度的柱状图，比月份的更宽，把三个月的小柱状条包含在里面，视觉上，每个季度柱状图成为三个月柱状图的背景色。 季度和月份的柱状图分2种颜色，要能清晰展示。 你帮我详细指出每个步骤要怎么做，贴出所有详细的配置和代码</p><h2 id="调试" tabindex="-1"><a class="header-anchor" href="#调试"><span>调试</span></a></h2><p>https://echarts.apache.org/examples/zh/editor.html?c=bar-simple</p><h2 id="数据准备" tabindex="-1"><a class="header-anchor" href="#数据准备"><span>数据准备</span></a></h2><h3 id="数据表和查询语句" tabindex="-1"><a class="header-anchor" href="#数据表和查询语句"><span>数据表和查询语句</span></a></h3><p>数据表设计（DDL）:</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> craw<span class="token punctuation">.</span>ods_cwr_end_shipment_order_detail_nd <span class="token punctuation">(</span></span>
<span class="line">	shipment_detail_id serial4 <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">	order_id int4 <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">	product_id int4 <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">	shipment_date <span class="token keyword">date</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">	quantity int4 <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">	unit_price <span class="token keyword">numeric</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">	total_amount <span class="token keyword">numeric</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span> GENERATED ALWAYS <span class="token keyword">AS</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>quantity::<span class="token keyword">numeric</span> <span class="token operator">*</span> unit_price<span class="token punctuation">)</span><span class="token punctuation">)</span> STORED <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token keyword">status</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;shipped&#39;</span>::<span class="token keyword">character</span> <span class="token keyword">varying</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token keyword">CONSTRAINT</span> ods_cwr_end_shipment_order_detail_nd_pkey <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>shipment_detail_id<span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token keyword">CONSTRAINT</span> ods_cwr_end_shipment_order_detail_nd_quantity_check <span class="token keyword">CHECK</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>quantity <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">	<span class="token keyword">CONSTRAINT</span> ods_cwr_end_shipment_order_detail_nd_unit_price_check <span class="token keyword">CHECK</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>unit_price <span class="token operator">&gt;=</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>::<span class="token keyword">numeric</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">CREATE</span> <span class="token keyword">INDEX</span> idx_shipment_date <span class="token keyword">ON</span> craw<span class="token punctuation">.</span>ods_cwr_end_shipment_order_detail_nd <span class="token keyword">USING</span> <span class="token keyword">btree</span> <span class="token punctuation">(</span>shipment_date<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>新建 <code>数据模型</code>，新增 <code>SQL查询</code></p><p>SQL数据查询语句如下：</p><div class="language-sql line-numbers-mode" data-highlighter="prismjs" data-ext="sql"><pre><code class="language-sql"><span class="line"><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">(</span></span>
<span class="line">  <span class="token keyword">SELECT</span> </span>
<span class="line">    TO_CHAR<span class="token punctuation">(</span>shipment_date<span class="token punctuation">,</span> <span class="token string">&#39;YYYY-Q&#39;</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> quarter_label<span class="token punctuation">,</span></span>
<span class="line">    TO_CHAR<span class="token punctuation">(</span>shipment_date<span class="token punctuation">,</span> <span class="token string">&#39;YYYY-MM&#39;</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> month_label<span class="token punctuation">,</span></span>
<span class="line">    <span class="token boolean">NULL</span> <span class="token keyword">AS</span> quarter_amount<span class="token punctuation">,</span> </span>
<span class="line">    <span class="token function">SUM</span><span class="token punctuation">(</span>total_amount<span class="token punctuation">)</span> <span class="token keyword">AS</span> month_amount</span>
<span class="line">  <span class="token keyword">FROM</span> craw<span class="token punctuation">.</span>ods_cwr_end_shipment_order_detail_nd</span>
<span class="line">  <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> quarter_label<span class="token punctuation">,</span> month_label</span>
<span class="line">  <span class="token keyword">UNION</span> <span class="token keyword">ALL</span></span>
<span class="line">  <span class="token keyword">SELECT</span> </span>
<span class="line">    TO_CHAR<span class="token punctuation">(</span>shipment_date<span class="token punctuation">,</span> <span class="token string">&#39;YYYY-Q&#39;</span><span class="token punctuation">)</span> <span class="token keyword">AS</span> quarter_label<span class="token punctuation">,</span></span>
<span class="line">    <span class="token boolean">NULL</span> <span class="token keyword">AS</span> month_label<span class="token punctuation">,</span></span>
<span class="line">    <span class="token function">SUM</span><span class="token punctuation">(</span>total_amount<span class="token punctuation">)</span> <span class="token keyword">AS</span> quarter_amount<span class="token punctuation">,</span></span>
<span class="line">    <span class="token boolean">NULL</span> <span class="token keyword">AS</span> month_amount</span>
<span class="line">  <span class="token keyword">FROM</span> craw<span class="token punctuation">.</span>ods_cwr_end_shipment_order_detail_nd</span>
<span class="line">  <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> quarter_label</span>
<span class="line"><span class="token punctuation">)</span> <span class="token keyword">AS</span> combined_data</span>
<span class="line"><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> quarter_label<span class="token punctuation">,</span> month_label NULLS <span class="token keyword">FIRST</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="数据模型层级配置" tabindex="-1"><a class="header-anchor" href="#数据模型层级配置"><span>数据模型层级配置</span></a></h3><p>由于 <code>SmartBI V10</code> ​​不支持层级目录整体拖拽​​，需单独绑定字段.</p><p>进入 <code>数据模型</code>， 在右上角 <code>维度</code> 配置中，<code>新建层次结构</code>，命名为 <code>时间层级维度</code>。</p><ol><li>右键点击 quarter_label → ​​生成时间层次​​ → 勾选 ​​“季度”​</li><li>右键点击 month_label → ​​生成时间层次​​ → 勾选 ​​“月份”​</li><li>在 <code>时间层级维度</code> 中，把刚刚生成的时间层次 <code>季度</code> 和 <code>月份</code> 字段，拖拽进去。注意先后顺序。</li></ol><h2 id="仪表盘配置" tabindex="-1"><a class="header-anchor" href="#仪表盘配置"><span>仪表盘配置</span></a></h2><p>新建 <code>交互式仪表盘</code>，命名为 <code>季度与月份出货金额对比</code>。</p><ol><li>点击左上方 <code>组件</code> 按钮，选择 <code>柱图</code> 组件，拖拽到画布中。</li><li>双击画布上的 <code>柱状图</code> 组件，在左上角，点击<code>数据</code> 选项卡，选择前面建的 <code>数据模型</code>。</li><li>在左上角 <code>维度</code> 列表中，找到 <code>时间层级维度</code>，将 <code>季度</code> 和 <code>月份</code> 拖拽到右侧的 <code>列</code>（<code>X轴</code>） 区域。</li><li>在左下角 <code>度量</code> 列表中，找到 <code>quarter_amount</code> 和 <code>month_amount</code>，将它们拖拽到右侧的 <code>行</code>（<code>Y轴</code>） 区域。</li></ol><p>自定义属性：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">option <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;季度与月份出货金额对比&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">legend</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;季度出货&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;月份出货&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">10</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">tooltip</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;axis&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">let</span> tip <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;\\nQ&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;&lt;br/&gt;&#39;</span><span class="token punctuation">;</span></span>
<span class="line">      params<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">p</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> value <span class="token operator">=</span> p<span class="token punctuation">.</span>value <span class="token operator">?</span> p<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token string">&#39;zh-CN&#39;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;元&#39;</span> <span class="token operator">:</span> <span class="token string">&#39;N/A&#39;</span><span class="token punctuation">;</span></span>
<span class="line">        tip <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>p<span class="token punctuation">.</span>marker<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>p<span class="token punctuation">.</span>seriesName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;br/&gt;</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">return</span> tip<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">xAxis</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;category&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>年月 <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">date</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token comment">// 安全处理月份数据格式</span></span>
<span class="line">      <span class="token keyword">const</span> month <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;-&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> date<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">const</span> quarterNum <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>month<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>month<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">月\\nQ</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>quarterNum<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">axisLabel</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> parts <span class="token operator">=</span> val<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&#39;\\n&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token comment">// 季度标签优先显示</span></span>
<span class="line">        <span class="token keyword">return</span> parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>parts<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">季度</span><span class="token template-punctuation string">\`</span></span> <span class="token operator">:</span> parts<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token function-variable function">interval</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> index <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token comment">// 每3个月显示季度标签</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">yAxis</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;出货金额(元)&#39;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">series</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token comment">// 季度系列（宽幅背景）</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;季度出货&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token comment">// xAxisIndex: 0, // 绑定月份轴</span></span>
<span class="line">    <span class="token literal-property property">barWidth</span><span class="token operator">:</span> <span class="token string">&#39;20%&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 关键点：宽度≈3个月柱总宽（需微调）</span></span>
<span class="line">    <span class="token literal-property property">barGap</span><span class="token operator">:</span> <span class="token string">&#39;-100%&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">z</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token comment">// 月份系列（窄柱前景）</span></span>
<span class="line">    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;月份出货&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token comment">// xAxisIndex: 0,</span></span>
<span class="line">    <span class="token literal-property property">barWidth</span><span class="token operator">:</span> <span class="token string">&#39;20%&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">barCategoryGap</span><span class="token operator">:</span> <span class="token string">&#39;5%&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">barGap</span><span class="token operator">:</span> <span class="token string">&#39;15%&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token literal-property property">z</span><span class="token operator">:</span> <span class="token number">2</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="静态echarts配置" tabindex="-1"><a class="header-anchor" href="#静态echarts配置"><span>静态ECharts配置</span></a></h2><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">option <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#39;季度与月份出货金额对比&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token string">&#39;center&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">tooltip</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token literal-property property">trigger</span><span class="token operator">:</span> <span class="token string">&#39;axis&#39;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">const</span> quarterNames <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token operator">:</span> <span class="token string">&#39;Q1&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token operator">:</span> <span class="token string">&#39;Q2&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token operator">:</span> <span class="token string">&#39;Q3&#39;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token operator">:</span> <span class="token string">&#39;Q4&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">let</span> tip <span class="token operator">=</span> params<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">&#39;&lt;br/&gt;&#39;</span><span class="token punctuation">;</span></span>
<span class="line">      params<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">p</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">const</span> value <span class="token operator">=</span> p<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&#39;元&#39;</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">const</span> isQuarter <span class="token operator">=</span> p<span class="token punctuation">.</span>seriesName<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;季度&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        tip <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>p<span class="token punctuation">.</span>marker<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>p<span class="token punctuation">.</span>seriesName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>isQuarter<span class="token punctuation">)</span> tip <span class="token operator">+=</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">（</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>quarterNames<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>dataIndex<span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">）</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">;</span></span>
<span class="line">        tip <span class="token operator">+=</span> <span class="token string">&#39;&lt;br/&gt;&#39;</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">      <span class="token keyword">return</span> tip<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">legend</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;季度出货&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;月份出货&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token comment">// 双X轴结构：季度轴（顶部） + 月份轴（底部）</span></span>
<span class="line">  <span class="token literal-property property">xAxis</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token comment">// 季度轴（居中标签）</span></span>
<span class="line">      <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token string">&#39;top&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;category&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;Q1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Q2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Q3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Q4&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">axisLabel</span><span class="token operator">:</span> <span class="token punctuation">{</span> </span>
<span class="line">        <span class="token literal-property property">interval</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token function-variable function">formatter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> val <span class="token operator">||</span> <span class="token string">&#39;&#39;</span> <span class="token comment">// 空月份不显示标签</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">axisTick</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">axisLine</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">show</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token comment">// 月份轴（主坐标）</span></span>
<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;category&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;1月&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2月&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;3月&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;4月&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;5月&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;6月&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;7月&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;8月&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;9月&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;10月&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;11月&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;12月&#39;</span><span class="token punctuation">]</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">yAxis</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;出货金额(元)&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">grid</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token literal-property property">containLabel</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token literal-property property">series</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token comment">// 季度系列（宽幅背景）</span></span>
<span class="line">      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;季度出货&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">xAxisIndex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token comment">// 绑定月份轴</span></span>
<span class="line">      <span class="token literal-property property">barWidth</span><span class="token operator">:</span> <span class="token string">&#39;260%&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 关键点：宽度≈3个月柱总宽（需微调）</span></span>
<span class="line">      <span class="token literal-property property">barGap</span><span class="token operator">:</span> <span class="token string">&#39;-100%&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 强制与月份柱重叠[5](@ref)</span></span>
<span class="line">      <span class="token literal-property property">stack</span><span class="token operator">:</span> <span class="token string">&#39;季度&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 堆叠标识（与月份分离）[7](@ref)</span></span>
<span class="line">      <span class="token literal-property property">itemStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;rgba(100, 180, 255, 0.3)&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 半透明背景</span></span>
<span class="line">        <span class="token literal-property property">borderRadius</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 圆角顶部</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token comment">// 关键修正：每个季度1个数据点 + 8个null占位</span></span>
<span class="line">      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">35000</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">42000</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">38000</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token number">48000</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">z</span><span class="token operator">:</span> <span class="token number">1</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token comment">// 月份系列（窄柱前景）</span></span>
<span class="line">      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;月份出货&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">xAxisIndex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">barWidth</span><span class="token operator">:</span> <span class="token string">&#39;50%&#39;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">stack</span><span class="token operator">:</span> <span class="token string">&#39;月份&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 独立堆叠组[6](@ref)</span></span>
<span class="line">      <span class="token literal-property property">itemStyle</span><span class="token operator">:</span> <span class="token punctuation">{</span> </span>
<span class="line">        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&#39;#ff7b5a&#39;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token literal-property property">borderRadius</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> </span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">12000</span><span class="token punctuation">,</span> <span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">13000</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">,</span> <span class="token number">14000</span><span class="token punctuation">,</span> <span class="token number">13000</span><span class="token punctuation">,</span> <span class="token number">12000</span><span class="token punctuation">,</span> <span class="token number">14000</span><span class="token punctuation">,</span> <span class="token number">12000</span><span class="token punctuation">,</span> <span class="token number">16000</span><span class="token punctuation">,</span> <span class="token number">15000</span><span class="token punctuation">,</span> <span class="token number">17000</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token literal-property property">z</span><span class="token operator">:</span> <span class="token number">2</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,22)])])}const i=s(e,[["render",o]]),r=JSON.parse('{"path":"/bi/echarts-bar.html","title":"","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1751215914000,"contributors":[{"name":"Hankin","username":"Hankin","email":"hankin@catmes.com","commits":1,"url":"https://github.com/Hankin"}],"changelog":[{"hash":"257165c59e095860668379e6bfee2fac00a33ab4","time":1751215914000,"email":"hankin@catmes.com","author":"Hankin","message":"ADD echart-bar to bi"}]},"filePathRelative":"bi/echarts-bar.md"}');export{i as comp,r as data};
