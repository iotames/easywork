import{_ as a,c as n,e,o as l}from"./app-D3rUnszu.js";const i={};function p(t,s){return l(),n("div",null,[...s[0]||(s[0]=[e(`<h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h2><p>Nexus Repository Manager（简称 Nexus）是由 Sonatype 公司开发的一款企业级仓库管理工具，主要用于搭建和管理 Maven 私有仓库。</p><p>onatype Nexus 3 这个功能强大的产品，它不仅能够用于创建 Maven 私服，还可以用来创建 yum、pypi、npm、nuget、rubygems 等各种私有仓库。而且，Nexus 从 3.0 版本也开始支持创建 Docker 镜像仓库了！</p><p>官方文档：https://help.sonatype.com/en/maven-repositories.html</p><h2 id="核心功能" tabindex="-1"><a class="header-anchor" href="#核心功能"><span>核心功能</span></a></h2><ol><li>代理仓库（Proxy Repository）：缓存远程公共仓库（如 Maven Central）的依赖，加速本地构建并减少外网请求。</li><li>宿主仓库（Hosted Repository）：存储企业内部的私有构件（如公司内部开发的 Jar 包）。</li><li>仓库组（Repository Group）：将多个仓库聚合为一个统一入口（例如合并 Maven Central 和私有仓库的访问地址）。</li></ol><h2 id="容器安装方式" tabindex="-1"><a class="header-anchor" href="#容器安装方式"><span>容器安装方式</span></a></h2><ul><li>官方容器镜像仓库：https://hub.docker.com/r/sonatype/nexus3</li><li>Nexus3最佳实践-搭建Docker私有仓库：https://cloud.tencent.com/developer/article/1352350</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">docker</span> pull sonatype/nexus3:3.85.0</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>启动脚本：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token shebang important">#!/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--restart</span> always <span class="token parameter variable">--name</span> nexus <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">-p</span> <span class="token number">5800</span>:8081 <span class="token punctuation">\\</span></span>
<span class="line"><span class="token parameter variable">-v</span> /some/dir/nexus-data:/nexus-data <span class="token punctuation">\\</span></span>
<span class="line">sonatype/nexus3:3.85.0</span>
<span class="line"><span class="token comment">#-e HTTP_PROXY=&quot;socks5://192.168.2.71:7890&quot; \\</span></span>
<span class="line"><span class="token comment">#-e HTTPS_PROXY=&quot;socks5://192.168.2.71:7890&quot; \\</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>Nexus 安装在 /opt/sonatype/nexus 目录下。</li><li>持久化目录 /nexus-data 用于存放配置、日志和存储数据。该目录必须对 Nexus 进程（以 UID 200 运行）具有可写权限。</li><li>默认用户是 admin，唯一生成的密码可以在卷内的 admin.password 文件中找到</li><li>INSTALL4J_ADD_VM_PARAMS 环境变量，用于向启动脚本传递 JVM 参数。</li></ol><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># INSTALL4J_ADD_VM_PARAMS 环境变量用于将 JVM 参数传递给启动脚本</span></span>
<span class="line"><span class="token comment"># 默认为 -Xms2703m -Xmx2703m -XX:MaxDirectMemorySize=2703m -Djava.util.prefs.userRoot=\${NEXUS_DATA}/javaprefs</span></span>
<span class="line"><span class="token comment"># -Djava.util.prefs.userRoot=/some-other-dir 可以设置为持久路径，如果容器重新启动，它将保留已安装的 Sonatype Nexus 存储库许可证。</span></span>
<span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token number">8081</span>:8081 <span class="token parameter variable">--name</span> nexus <span class="token parameter variable">-e</span> <span class="token assign-left variable">INSTALL4J_ADD_VM_PARAMS</span><span class="token operator">=</span><span class="token string">&quot;-Xms2703m -Xmx2703m -XX:MaxDirectMemorySize=2703m -Djava.util.prefs.userRoot=/some-other-dir&quot;</span> sonatype/nexus3</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>其他启动参数：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token shebang important">#!/bin/bash</span></span>
<span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-dti</span> <span class="token punctuation">\\</span></span>
<span class="line">        <span class="token parameter variable">--net</span><span class="token operator">=</span>host <span class="token punctuation">\\</span></span>
<span class="line">        <span class="token parameter variable">--name</span><span class="token operator">=</span>nexus <span class="token punctuation">\\</span></span>
<span class="line">        <span class="token parameter variable">--privileged</span><span class="token operator">=</span>true <span class="token punctuation">\\</span></span>
<span class="line">        <span class="token parameter variable">--restart</span><span class="token operator">=</span>always <span class="token punctuation">\\</span></span>
<span class="line">        <span class="token parameter variable">--ulimit</span> <span class="token assign-left variable">nofile</span><span class="token operator">=</span><span class="token number">655350</span> <span class="token punctuation">\\</span></span>
<span class="line">        <span class="token parameter variable">--ulimit</span> <span class="token assign-left variable">memlock</span><span class="token operator">=</span>-1 <span class="token punctuation">\\</span></span>
<span class="line">        <span class="token parameter variable">--memory</span><span class="token operator">=</span>16G <span class="token punctuation">\\</span></span>
<span class="line">        --memory-swap<span class="token operator">=</span>-1 <span class="token punctuation">\\</span></span>
<span class="line">        --cpuset-cpus<span class="token operator">=</span><span class="token string">&#39;1-7&#39;</span> <span class="token punctuation">\\</span></span>
<span class="line">        <span class="token parameter variable">-e</span> <span class="token assign-left variable">INSTALL4J_ADD_VM_PARAMS</span><span class="token operator">=</span><span class="token string">&quot;-Xms4g -Xmx4g -XX:MaxDirectMemorySize=8g&quot;</span> <span class="token punctuation">\\</span></span>
<span class="line">        <span class="token parameter variable">-v</span> /etc/localtime:/etc/localtime <span class="token punctuation">\\</span></span>
<span class="line">        <span class="token parameter variable">-v</span> /data/nexus:/nexus-data <span class="token punctuation">\\</span></span>
<span class="line">        sonatype/nexus3:3.85.0</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="常规安装方式" tabindex="-1"><a class="header-anchor" href="#常规安装方式"><span>常规安装方式</span></a></h2><h3 id="硬件环境" tabindex="-1"><a class="header-anchor" href="#硬件环境"><span>硬件环境</span></a></h3><p>最低配置:</p><ol><li>CPU：1 核（适用于小型团队或测试环境）。</li><li>内存：2 GB（若运行其他服务需适当增加）。</li><li>磁盘空间：至少 10 GB（根据依赖库数量动态扩展）。</li></ol><p>推荐配置：</p><ol><li>CPU：2 核或以上（支持高并发请求）。</li><li>内存：4 GB 或以上（避免频繁 GC 影响性能）。</li><li>磁盘空间：50 GB 以上（适用于企业级仓库，需预留增长空间）。</li></ol><h3 id="软件环境" tabindex="-1"><a class="header-anchor" href="#软件环境"><span>软件环境</span></a></h3><ol><li>JDK 8 或更高版本，需要 <code>JAVA_HOME</code> 环境变量。</li><li>Nexus Repository 默认使用嵌入式数据库，但生产环境建议配置 PostgreSQL 或 MySQL。</li></ol><h3 id="安装和配置" tabindex="-1"><a class="header-anchor" href="#安装和配置"><span>安装和配置</span></a></h3><ul><li>推荐下载 Nexus Repository Manager OSS，即开源免费版本: https://www.sonatype.com/products/repository-oss-download</li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">tar</span> <span class="token parameter variable">-xzvf</span> nexus-3.x.x-unix.tar.gz <span class="token parameter variable">-C</span> /opt</span>
<span class="line"><span class="token builtin class-name">cd</span> /opt/nexus/bin</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 前台运行</span></span>
<span class="line">./nexus run</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 后台服务模式</span></span>
<span class="line">./nexus start</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>添加为systemd系统服务：<code>nexus.service</code>:</p><div class="language-conf line-numbers-mode" data-highlighter="prismjs" data-ext="conf"><pre><code class="language-conf"><span class="line">ExecStart=/opt/nexus/bin/nexus start</span>
<span class="line">ExecStop=/opt/nexus/bin/nexus stop</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>日志：</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token comment"># 查看启动日志</span></span>
<span class="line"><span class="token function">tail</span> <span class="token parameter variable">-f</span> /opt/nexus/log/nexus.log</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol><li>端口冲突：若端口 8081 被占用，修改 etc/nexus-default.properties 中的 application-port 属性。</li><li>内存不足：编辑 bin/nexus.vmoptions 调整 JVM 参数（如 -Xms512m -Xmx1024m）</li><li>权限问题：确保 Nexus 用户对 <code>sonatype-work</code> 目录有读写权限</li></ol><h2 id="登录访问" tabindex="-1"><a class="header-anchor" href="#登录访问"><span>登录访问</span></a></h2><p>默认端口为 <code>8081</code>，打开浏览器访问：http://localhost:8081</p><p>默认管理员账号：<code>admin</code> 初始密码：在 <code>sonatype-work/nexus3/admin.password</code> 文件中查找。</p><h3 id="仓库类型" tabindex="-1"><a class="header-anchor" href="#仓库类型"><span>仓库类型</span></a></h3><ol><li>Hosted Repository（存储私有 Jar 包）</li><li>Proxy Repository（代理 Maven Central）</li><li>Repository Group（聚合仓库，包含以上2种类型的多个仓库，可以调整优先级）</li></ol><p><code>/#admin/repository/repositories</code> 路径下已存在的​​maven仓库有4个：</p><ol><li>​​maven-public​​ (group)：只读，用于客户端下载依赖（聚合了central、releases、snapshots） ​​2. maven-releases​​ (hosted)：可写，用于部署正式版本 ​​3. maven-snapshots​​ (hosted)：可写，用于部署快照版本 ​​4. maven-central​​ (proxy)：只读，代理Maven中央仓库</li></ol><p>创建仓库：</p><ol><li>进入 Repository → Repositories → Create repository。</li><li>选择类型为 maven2 (group)。</li><li>填写名称（如 maven-public）和存储空间（Blob Store）。</li><li>在 Group 选项卡中，从左侧可用仓库列表中选择需要聚合的仓库（如 maven-releases、maven-snapshots、maven-central），添加到右侧的成员列表。</li><li>通过上下箭头调整仓库顺序（顺序影响依赖查找优先级）。</li></ol><p>定期备份仓库数据和配置文件（如 sonatype-work 目录）。</p>`,41)])])}const o=a(i,[["render",p]]),c=JSON.parse('{"path":"/java/nexus.html","title":"","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1760198591000,"contributors":[{"name":"Hankin","username":"Hankin","email":"554553400@qq.com","commits":4,"url":"https://github.com/Hankin"}],"changelog":[{"hash":"98fdd5bc94f41825b95bafb2701c7794df70fa9d","time":1760198591000,"email":"hankin@catmes.com","author":"Hankin","message":"UPDATE java: mvn deploy to nexus"},{"hash":"17d0a18cb1e7c76ad94b69f523872c9d6e37a375","time":1760193362000,"email":"hankin@catmes.com","author":"Hankin","message":"UPDATE Nexus"},{"hash":"6766829a7fee0c3f3a03004173698e2a2c8497a9","time":1760003856000,"email":"554553400@qq.com","author":"Hankin","message":"UPDATE nexus.md"},{"hash":"8035d3518a9ded9d5b678f5c8d994c3dd5259f9c","time":1760003512000,"email":"554553400@qq.com","author":"Hankin","message":"ADD Nexus for repository of mvn"}]},"filePathRelative":"java/nexus.md"}');export{o as comp,c as data};
