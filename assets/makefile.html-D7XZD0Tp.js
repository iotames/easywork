import{_ as a,c as s,e as n,o as l}from"./app-C_8_iCo-.js";const i={};function c(t,e){return l(),s("div",null,[...e[0]||(e[0]=[n(`<h2 id="makefile规则" tabindex="-1"><a class="header-anchor" href="#makefile规则"><span>Makefile规则</span></a></h2><p>整体规则:</p><div class="language-makefile line-numbers-mode" data-highlighter="prismjs" data-ext="makefile"><pre><code class="language-makefile"><span class="line"><span class="token target symbol">&lt;target&gt;</span> <span class="token punctuation">:</span> &lt;prerequisites&gt;</span>
<span class="line">[tab] &lt;commands&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>第一行冒号前面的部分叫做 <code>目标</code>（target），冒号后面的部分叫做 <code>前置条件</code>（prerequisites）。前置条件可以由一个或多个文件组成，多个文件之间由空格分隔。 第二行必须由一个 <code>tab</code> 键起始，后面跟着 <code>命令</code>（commands）。 “目标” 是必需的，不可省略。“前置条件” 和 “命令” 是可省略的，但是这两者至少需要存在一个（两者不能同时省略）。</p><p>示例：</p><ol><li>新建 <code>Makefile</code> 文件，注意第二行开始的空格，必须用 <code>TAB</code> 键。</li><li>新建 <code>temp.txt</code> 文件，内容随意</li><li>执行 <code>make hello.txt</code> 命令，创建 <code>hello.txt</code> 文件。</li></ol><div class="language-makefile line-numbers-mode" data-highlighter="prismjs" data-ext="makefile"><pre><code class="language-makefile"><span class="line"><span class="token target symbol">hello.txt</span><span class="token punctuation">:</span> temp.txt</span>
<span class="line">    cp temp.txt hello.txt</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p><code>Makefile</code> 规则文件：文件名为 <code>Makefile</code> 或 <code>makefile</code>， 不需要扩展名。</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">make</span> <span class="token parameter variable">-f</span> config.txt</span>
<span class="line"><span class="token comment"># 也可以使用 \`-f\` 指定 \`Makefile\` 文件名：</span></span>
<span class="line"><span class="token function">make</span> <span class="token parameter variable">--file</span><span class="token operator">=</span>config.txt</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="命令行赋值" tabindex="-1"><a class="header-anchor" href="#命令行赋值"><span>命令行赋值</span></a></h2><div class="language-makefile line-numbers-mode" data-highlighter="prismjs" data-ext="makefile"><pre><code class="language-makefile"><span class="line"><span class="token comment"># Linux/macOS</span></span>
<span class="line">BUILD_TIME<span class="token operator">:=</span><span class="token variable">$</span><span class="token punctuation">(</span><span class="token function">shell</span> date +%Y-%m-%d_%H_%M<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Windows PowerShell</span></span>
<span class="line">BUILD_TIME<span class="token operator">:=</span><span class="token variable">$</span><span class="token punctuation">(</span><span class="token function">shell</span> powershell -Command <span class="token string">&quot;Get-Date -Format &#39;yyyy-MM-dd_HH_mm&#39;&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Windows CMD</span></span>
<span class="line">BUILD_TIME<span class="token operator">:=</span><span class="token variable">$</span><span class="token punctuation">(</span><span class="token function">shell</span> cmd /c <span class="token string">&quot;echo %date:~0,4%-%date:~5,2%-%date:~8,2%_%time:~0,2%_%time:~3,2%&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="赋予当前位置值" tabindex="-1"><a class="header-anchor" href="#赋予当前位置值"><span><code>:=</code> 赋予当前位置值</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">VIR_A := A</span>
<span class="line">VIR_B := $(VIR_A) B</span>
<span class="line">VIR_A := AA</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="赋予最后展开值" tabindex="-1"><a class="header-anchor" href="#赋予最后展开值"><span><code>=</code> 赋予最后展开值</span></a></h2><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">VIR_A = A</span>
<span class="line">VIR_B = $(VIR_A) B</span>
<span class="line">VIR_A = AA</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>最后 <code>VIR_B</code> 的值是 <code>AA B</code>，而不是A B.</p><p>变量 <code>VIR_B</code> 的值是 <code>A B</code></p><h2 id="如果没有-则赋值" tabindex="-1"><a class="header-anchor" href="#如果没有-则赋值"><span><code>?=</code> 如果没有，则赋值</span></a></h2><p><code>?=</code>: 如果该变量没有被赋值，则赋予 <code>?=</code> 后的值。否则就依原有值，不改变。例：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">VIR ?= new_value</span>
<span class="line"># VIR == new_value</span>
<span class="line">VIR := old_value</span>
<span class="line">VIR ?= new_value</span>
<span class="line"># VIR == old_value</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="累加" tabindex="-1"><a class="header-anchor" href="#累加"><span><code>+=</code> 累加</span></a></h2><p><code>+=</code> 和常用理解一样，表示将等号后面的值，添加到前面的变量上</p><hr><blockquote><p>Makefile中:=, =, ?=和+=的含义 https://blog.csdn.net/b876144622/article/details/80372161</p></blockquote>`,24)])])}const p=a(i,[["render",c]]),o=JSON.parse('{"path":"/clang/makefile.html","title":"","lang":"zh-CN","frontmatter":{},"git":{"updatedTime":1768554915000,"contributors":[{"name":"Hankin","username":"Hankin","email":"554553400@qq.com","commits":2,"url":"https://github.com/Hankin"}],"changelog":[{"hash":"dc3ccef59b0ee942988be080f19837f9cee3dd6f","time":1768554915000,"email":"554553400@qq.com","author":"Hankin","message":"UPDATE makefile.md"},{"hash":"9353afaa55a1fe72809c2b4c16fa3159f33f9c46","time":1766158756000,"email":"554553400@qq.com","author":"Hankin","message":"RENAME clang/gcc.md to clang/musl-gcc.md. ADD cbuild.md"}]},"filePathRelative":"clang/makefile.md"}');export{p as comp,o as data};
